#!/usr/bin/env python3

import sys
import requests
import socket
import json

if len(sys.argv) < 2:
    print(f"Usage : {sys.argv[0]} <url> (Without https)")
    sys.exit(1)

#Getting headers
req = requests.get(f"https://{sys.argv[1]}")
head = req.headers
head = str(head)
print("Headers")
print(f"\n {head}")

#Getting IP
host = socket.gethostbyname(sys.argv[1])
print(f"\n\nUrl: {sys.argv[1]}")
print(f"IP address: {host}")

#Getting IP info
req1 = requests.get(f"https://ipinfo.io/{host}/json")
resp = json.loads(req1.text)

print(f"Location: {resp['loc']}")
print(f"Region: {resp['region']}")
print(f"City: {resp['city']}")
print(f"Country: {resp['country']}")
print(f"Hostname: {resp['hostname']}")
print(f"Organization: {resp['org']}")
print(f"Postal: {resp['postal']}")
print(f"Timezone: {resp['timezone']}")
